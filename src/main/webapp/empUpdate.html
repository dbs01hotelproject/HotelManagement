<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script type="text/javascript" src="js\jquery-3.3.1.min.js"></script>

<script type="text/javascript">
	$(function() {

		$("#button2").click(function() {
			var e_empno = $("#e_empno").val();
			var e_name = $("#e_name").val();
			var e_pass = $("#e_pass").val();
			var e_pass2 = $("#e_pass2").val();
			var e_character = $("#e_character").val();
			if (e_empno == "") {
				alert("员工编号不能为空");
				return false;
			}
			
			if (e_pass.length < 8 && e_pass.length > 0) {
				alert('密码少于8位');
				return false;
			}
			
			
			if (e_pass!=e_pass2){
				alert('两次密码不一致');
				return false;
			}

			$.ajax({

				type : "post",
				url : "/HotelManagement/EmployeeController/update",
				contentType : 'application/json;charset=UTF-8',//必须有
				data : JSON.stringify({
					e_empno : e_empno,
					e_name : e_name,
					e_pass : e_pass,
					e_character : e_character
				}),//请求的数据格式为JSON数据,对于@RequestBody来说很重要必不可少
				success : function(backData) {
					if (backData.key == 'success') {
						alert(backData.msg);
					} else {
						alert(backData.msg);
					}
				}
			});

		});
	});
	
	
	function search(){
		
		var e_empno = $("#lookfor").val();
		$.ajax({

			type : "post",
			url : "/HotelManagement/EmployeeController/search",
			contentType : 'application/json;charset=UTF-8',//必须有
			data : JSON.stringify({
				e_empno : e_empno,
			}),//请求的数据格式为JSON数据,对于@RequestBody来说很重要必不可少
			success : function(backData) {
				if (backData.key == 'success') {
					document.getElementById("fill").innerHTML = backData.body[0].e_empno + " " + backData.body[0].e_name + " "+
					backData.body[0].e_pass + " "+ backData.body[0].e_character;
				} else {
					alert(backData.msg);
					document.getElementById("fill").innerHTML = '';
				}
			}
		});
		
	}
</script>
</head>




<body>
	请输入要查看的员工编号
	<input type="text" name="lookfor" id="lookfor" >
	<input type="button" id="button1" name="button1" value="查看个人信息" onclick="search()">
	<div id="fill" name="fill" ></div>
	<p>用户个人信息修改</p>

	<br>
	<br>请输入需要修改的员工的编号:
	<input type="number" name="e_empno" id="e_empno">

	<br>
	<br>修改用户名:
	<input type="text" name="e_name" id="e_name">

	<br>
	<br>修改密码:
	<input type="password" name="e_pass" id="e_pass">
	
	<br>
	<br>确认密码:
	<input type="password" name="e_pass2" id="e_pass2">
	
	<br>
	<br>修改角色:
	<select id="e_character" >
		<option id="null" value="">不变</option>
		<option id="receptionlist" value="前台接待员">前台接待员</option>
		<option id="cashier" value="收银员">收银员</option>
		<option id="housekeeper" value="房管员 ">房管员</option>
		<option id="manager" value="管理员" >管理员</option>
	</select>
	
	<br><br>
	<input type="button" name="button2" id="button2" value="更新到数据库">
	
	<form action="/HotelManagement/EmployeeController/logout" method="get">
		<input type="submit" value="退出登录">
	</form>
</body>
</html>